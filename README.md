# AI 图片编辑器


后端代码重构

- 将代码分成四个模块：编辑模块、图库模块、风格模块、设置模块

- 每个模块有三层：接口层、逻辑层、数据库层

编辑图片流程
1. 前端通过调用编辑接口进行图片编辑，携带图片和对话列表两个参数
2. 后端如果是首次拿到数据，将图片保存在本地，然后将图片地址和对话信息存储到图库中，生成一条图库记录，图库保存原始图和修改后的图片，首次两个记录是同一张图片，如果不是首次，则只更新图库的对话记录。
3. 将修改后图片和对话记录据进行 AI 接口调用，等待 AI 返回数据
4. 讲返回的图片的对话信息重新存储，并返回给前端
